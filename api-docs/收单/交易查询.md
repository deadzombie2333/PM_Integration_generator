# 收单/交易查询 (Order Query)

## API Information

- **Method**: POST
- **Endpoint**: `https://pay-gate-uat.payermax.com/aggregate-pay/api/gateway/orderQuery`
- **Content-Type**: `application/json`

## Description

对于未同步返回交易结果的请求，商户可以主动发起查询查回交易结果。

## Request Headers

| Header | Type | Required | Description | Example |
|--------|------|----------|-------------|---------|
| Content-Type | string | ✓ | Request content type | `application/json` |
| sign | string | ✓ | 签名信息请参考技术文档 | `FPFVT3o227JrFRbqu19boZCpVVTF9KznxyRawUmxpfXilHV/0yK46haPhAjNu1hPUMy7Vw/ILXhfzffNm4Fj0apWknlTY9OJxnSoQxS9BTFtc61tn5yV1q69x/kkBl82/qwg+XTJ4fOzy7Mar3VaC1E2PlDA6RkkKBUyNE6RYgsdB+Su7an4+4HVTNAnoe74WyvBgxTLMNg28igBTdqxaO3w/UBY6ObVp7vkqkQGdL1Y+HgmMYaAVwrM3+ALWGId0sJ+YqTY4WJ+0xCRGhaSnybiIjZsQEYyID68WNUfuavDLDsEhaMm/HfQvf5p0R1Ltovp3wwJnEbQcjY458iX5A==` |

## Request Body Parameters

### Root Level Parameters

| Parameter | Type | Required | Max Length | Description |
|-----------|------|----------|------------|-------------|
| version | string | ✓ | 8 | 接口版本 当前值为：1.4 |
| keyVersion | string | ✓ | 8 | 密钥版本 当前值为：1 |
| requestTime | string | ✓ | 32 | 请求时间，符合rfc3339规范，格式：yyyy-MM-dd'T'HH:mm:ss.SSSXXX 时间需要在当前时间两分钟内 |
| appId | string | ✓ | 64 | 商户应用Id，PayerMax分配给商户应用的唯一标识 |
| merchantNo | string | ✗ | 32 | 商户号，商户与PayerMax业务签约时生成的唯一标识 |
| data | object | ✓ | - | 请求数据体 |

### Data Object Parameters

| Parameter | Type | Required | Max Length | Description |
|-----------|------|----------|------------|-------------|
| outTradeNo | string | ✓ | 64 | 原商户订单号 |

## Response (200)

### Response Body

| Parameter | Type | Required | Max Length | Description |
|-----------|------|----------|------------|-------------|
| code | string | ✓ | - | 返回码，'APPLY_SUCCESS'代表成功。只代表接口请求成功，不代表订单状态。 |
| msg | string | ✓ | - | 返回描述，'Success.'。只代表接口请求成功，不代表订单状态。 |
| data | object | ✗ | - | 返回数据体 |

### Data Object (Response)

| Parameter | Type | Required | Max Length | Description |
|-----------|------|----------|------------|-------------|
| reference | string | ✗ | 512 | 附加数据，商户上送的值 |
| outTradeNo | string | ✗ | 64 | 商户订单号 |
| tradeToken | string | ✗ | 64 | PayerMax交易流水号 |
| totalAmount | number | ✓ | - | 标价金额，金额的单位为元。 |
| currency | string | ✓ | 3 | 标价币种 |
| channelNo | string | ✗ | 64 | 渠道订单号 |
| thirdChannelNo | string | ✗ | 64 | 三方单号 |
| paymentCode | string | ✗ | 64 | VA单号 |
| country | string | ✓ | 2 | 用户支付的国家代码，大写字母 |
| status | string | ✗ | 32 | 交易状态，详见【交易状态】 |
| resultMsg | string | ✓ | - | 交易状态结果描述,仅失败时有值 |
| paymentDetails | array[object] | ✗ | - | 支付信息，只有交易成功会返回支付信息，当交易失败时返回空数组。 |
| fees | object | ✗ | - | 费用信息，支付成功且存在费用时才返回。 |

## Notes

- ✓ = Required field
- ✗ = Optional field
- 此接口用于查询未同步返回结果的交易
- 接口请求成功不代表订单状态成功，需要根据返回的status判断交易状态
- paymentDetails只有交易成功时才返回，失败时返回空数组
- fees信息只在支付成功且存在费用时才返回
