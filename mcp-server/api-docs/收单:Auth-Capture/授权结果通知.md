# 授权结果通知

## 接口信息

**请求方式:** POST

**请求地址:** `https://pay-gate-uat.payermax.com/authResultNotifyUrl`

**接口说明:** 支付完成后,PayerMax 会把相关支付结果通过数据流的形式发送给商户,商户需要接收处理,并按文档规范返回应答。

**提示:** 该地址无需商户主动请求,以下request.body为payermax对订单状态的回调内容,商户收到回调后需要响应`{"msg": "Success","code": "SUCCESS"}`

## Request

### Headers

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| Content-Type | string | 是 | 内容类型 | application/json |
| sign | string | 是 | 签名信息,请参考技术文档 | FPFVT3o227JrFRbqu19boZCpVVTF9KznxyRawUmxpfXilHV/0yK46haPhAjNu1hPUMy7Vw/ILXhfzffNm4Fj0apWknlTY9OJxnSoQxS9BTFtc61tn5yV1q69x/kkBl82/qwg+XTJ4fOzy7Mar3VaC1E2PlDA6RkkKBUyNE6RYgsdB+Su7an4+4HVTNAnoe74WyvBgxTLMNg28igBTdqxaO3w/UBY6ObVp7vkqkQGdL1Y+HgmMYaAVwrM3+ALWGId0sJ+YqTY4WJ+0xCRGhaSnybiIjZsQEYyID68WNUfuavDLDsEhaMm/HfQvf5p0R1Ltovp3wwJnEbQcjY458iX5A== |

### Body (application/json)

| 参数名 | 类型 | 必填 | 说明 | 限制 |
|--------|------|------|------|------|
| code | string | 是 | 返回码,交易成功时,code:APPLY_SUCCESS 且status:SUCCESS; 交易失败,code会返回交易失败错误码 且status为FAILED或CLOSED | <= 32 characters |
| msg | string | 是 | 返回描述,交易成功时,msg:Success. 且status:SUCCESS; 交易失败,msg会返回交易失败错误msg 且status为FAILED或CLOSED | <= 256 characters |
| keyVersion | string | 是 | 密钥版本。当前值为:1 | <= 8 characters |
| appId | string | 是 | 商户app id | <= 64 characters |
| merchantNo | string | 否 | 商户Id | <= 15 characters |
| notifyTime | string | 是 | 通知时间,符合rfc3339规范,格式:yyyy-MM-dd'T'HH:mm:ss.SSSXXX | <= 32 characters |
| notifyType | string | 是 | 通知类型 PAYMENT | <= 16 characters |
| data | object | 是 | 通知数据体 | - |

#### data 对象

| 参数名 | 类型 | 必填 | 说明 | 限制 |
|--------|------|------|------|------|
| outTradeNo | string | 是 | 商户订单号 | <= 64 characters |
| tradeToken | string | 是 | PayerMax交易流水号 | <= 64 characters |
| totalAmount | number | 是 | 商户传入的订单金额,金额的单位为元 | - |
| currency | string | 是 | 标价币种 | <= 3 characters |
| country | string | 否 | 用户支付的国家代码,大写字母 | <= 2 characters |
| status | string | 是 | 交易状态:SUCCESS-支付成功,FAILED -支付失败,CLOSED-关单 | <= 32 characters |
| captureMode | string | 是 | 请款模式:MANUAL | - |
| authorizationType | string | 是 | 授权类型:FINAL_AUTH | - |
| completeTime | string | 是 | 完成时间,utc+0时区 | - |
| paymentDetails | array[object] | 否 | 支付信息 | - |
| fees | object | 否 | 费用信息,支付成功且存在费用时才返回 | - |
| reference | string | 否 | 商户自定义附加数据,回调中原样返回 | <= 512 characters |
| channelNo | string | 否 | 渠道订单号 | <= 64 characters |
| thirdChannelNo | string | 否 | 三方单号 | <= 64 characters |
| paymentCode | string | 否 | VA单号 | <= 64 characters |

## Response

### 200 成功响应

#### Body (application/json)

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| code | string | 是 | 仅可响应 'SUCCESS'(仅代表成功收到通知,不代表订单状态) |
| msg | string | 是 | 响应 'Success'(仅代表成功收到通知,不代表订单状态) |
