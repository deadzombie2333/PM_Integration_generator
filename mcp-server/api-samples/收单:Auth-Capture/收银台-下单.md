# 收银台-下单 API Sample

## Request

```bash
curl --request POST \
  --url 'https://pay-gate-uat.payermax.com/aggregate-pay/api/gateway/orderAndPay(for-auth-capture-dont-copy-me)' \
  --header 'Accept: application/json' \
  --header 'Content-Type: application/json' \
  --header 'sign: FPFVT3o227JrFRbqu19boZCpVVTF9KznxyRawUmxpfXilHV/0yK46haPhAjNu1hPUMy7Vw/ILXhfzffNm4Fj0apWknlTY9OJxnSoQxS9BTFtc61tn5yV1q69x/kkBl82/qwg+XTJ4fOzy7Mar3VaC1E2PlDA6RkkKBUyNE6RYgsdB+Su7an4+4HVTNAnoe74WyvBgxTLMNg28igBTdqxaO3w/UBY6ObVp7vkqkQGdL1Y+HgmMYaAVwrM3+ALWGId0sJ+YqTY4WJ+0xCRGhaSnybiIjZsQEYyID68WNUfuavDLDsEhaMm/HfQvf5p0R1Ltovp3wwJnEbQcjY458iX5A==' \
  --data '{
  "version": "1.4",
  "keyVersion": "1",
  "requestTime": "2022-01-17T09:05:52.194+00:00",
  "appId": "bbd8d2639a7c4dfd8df7d005294390df",
  "merchantNo": "020113838535952",
  "data": {
    "outTradeNo": "P1642410352195",
    "subject": "MacPro14 and Mouse",
    "captureMode": "MANUAL",
    "authorizationType": "FINAL_AUTH",
    "totalAmount": 90,
    "currency": "TWD",
    "country": "TW",
    "userId": "test1111",
    "language": "en",
    "reference": "reference查询和回调返回",
    "frontCallbackUrl": "http://www.frontcallbackurl.example.com",
    "notifyUrl": "http://www.notifyUrl.example.com",
    "integrate": "Hosted_Checkout",
    "expireTime": "1800",
    "paymentDetail": {
      "paymentMethodType": "",
      "targetOrg": "",
      "payAccountInfo": [
        {
          "accountNo": "fasdf@example.com",
          "accountNoType": "EMAIL"
        },
        {
          "accountNo": "0999998781111111",
          "accountNoType": "PHONE"
        },
        {
          "accountNo": "FASDFDF",
          "accountNoType": "ACCOUNT"
        }
      ]
    },
    "envInfo": {
      "deviceId": "eYOIkvFpZzztg00Yu6USdprBQZCWxDhiUAHCiK&K/cH9mT6wMaMOzAKe",
      "deviceLanguage": "zh_CN",
      "screenHeight": 768,
      "screenWidth": 1024
    },
    "goodsDetails": [
      {
        "goodsId": "D002",
        "goodsName": "韩版修身牛仔裤男",
        "quantity": "2",
        "price": "500",
        "goodsCurrency": "IDR",
        "showUrl": "http://xxxx.example.com",
        "goodsCategory": "电脑"
      }
    ],
    "shippingInfo": {
      "firstName": "zhang",
      "middleName": "shang",
      "lastName": "feng",
      "phoneNo": "13009090980",
      "email": "test@example.com",
      "address1": "er xin qiao",
      "address2": "cheng hua road",
      "city": "chengdu",
      "region": "wuhou",
      "state": "sichuan",
      "country": "ID",
      "zipCode": "000000"
    },
    "billingInfo": {
      "firstName": "James",
      "middleName": "middleName",
      "lastName": "Smith",
      "email": "James@example.com",
      "phoneNo": "903124360628",
      "address1": "GOLGELI SOKAK NO.34, 06700",
      "address2": "GOLGELI SOKAK NO.34, 06700",
      "city": "GAZIOSMANPASA/ANKAR",
      "region": "region",
      "state": "state",
      "country": "TR",
      "zipCode": "06700"
    },
    "riskParams": {
      "registerName": "lily",
      "regTime": "2023-07-01 12:08:34",
      "liveCountry": "VN",
      "payerAccount": "987654XXX",
      "payerName": "lily",
      "taxId": "1234567890"
    }
  }
}'
```

## Response

```json
{
  "code": "APPLY_SUCCESS",
  "msg": "",
  "data": {
    "redirectUrl": "https://cashier-n.payermax.com/index.html#/cashier/home?merchantId=020213827212251&merchantAppId=3b242b56a8b64274bcc37dac281120e3&country=ID&tradeToken=TOKEN20220117091121294138752&language=en&token=IHjqkZ8%2F%2FFcnfDPxWTvJFOrulUAKfXFUkxHJSiTdlnjnX1G6AOuTiSl6%2BN05EzxTaJkcSsSyGh5a1q%2FACwWN0sDD%2FgwY5YdWu3ghDcH2wqm%2BJIcEh0qZqo%2BQFnXp65bvkLZnY7VO7HwZGzyrpMBlPhfRCQxwBbc6lJcSYuPf%2Fe8%3D&amount=10000¤cy=IDR&frontCallbackUrl=https%3A%2F%2Fwww.payermax.com",
    "outTradeNo": "P1642410680681",
    "tradeToken": "T2024062702289232000001",
    "status": "PENDING"
  }
}
```
