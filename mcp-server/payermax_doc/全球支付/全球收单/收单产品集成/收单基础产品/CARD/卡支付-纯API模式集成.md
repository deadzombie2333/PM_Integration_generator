# 卡支付-纯API模式集成

该文档介绍纯API支付下，使用银行卡支付的集成要求。

**注意**: 相对收银台卡支付，商户需要自行构建支付收银页、支付结果页等，也无法使用收银台卡支付下的推荐卡能力。

## 1. 集成准备

在卡支付下，如果商户自行处理卡信息，须具备PCI DSS认证资质，并联系PayerMax商务团队，提供PCI认证材料。

商户也可以使用PayerMax Tokenization方案，以避免PCI DSS资质要求。

其他准备事项，请查看纯API支付-集成准备。

## 2. 交互流程

查看纯API支付-交互流程。

## 3. 接口列表

查看纯API支付-接口列表。

## 4. 环境信息

- **测试环境**: `https://pay-gate-uat.payermax.com/aggregate-pay/api/gateway/<接口PATH>`
- **集成环境**: `https://pay-gate.payermax.com/aggregate-pay/api/gateway/<接口PATH>`

## 5. 集成步骤

### 5.1 创建支付

商户可以通过 `/orderAndPay` API 接口创建支付，相对收银台卡支付，请求入参更丰富，比如，商户可以开启动态3DS能力。

可以通过请求参数 `data.paymentDetail.allowedCardOrg` 指定卡组。不同国家下卡支付的卡组信息，请查看支付方式列表。

#### 5.1.1 有PCI资质

查看纯API支付-创建支付。

#### 5.1.2 无PCI资质

如果商户无PCI DSS资质，可以通过PayerMax Tokenization方案实现安全合规的卡支付，具体参看 Tokenization 支付。

### 5.2 完成3DS认证

查看纯API支付-跳转用户认证。

### 5.3 获取支付结果

查看纯API支付-获取支付结果。

## 6. 测试上线

### 初步测试
在商户完成上述集成步骤后，可以发起实际支付请求进行初步测试验证，具体步骤请查看集成测试-发起测试。

### 验收流程
在测试通过后，最终发布上线前，须联系PayerMax技术支持，提交测试的订单信息，以便于PayerMax检查请求日志和数据，确认您已经正确集成相关能力，具体步骤请查看集成测试-发起验收。

### 上线准备
验收通过后，商户可以配置生产环境的集成信息，并准备开量事宜。

另外，在收单产品集成下有PayerMax支持的各类支付方式的集成文档，其中包含每种支付方式的测试上线说明。

## 7. 错误排除

### 错误码查询
测试或验收过程中的响应错误，可以查看错误排查-错误码。

### 常见问题
在常见问题中，总结列举各类常见的问题及其处理方式。

### 技术支持
您还可以直接联系PayerMax技术支持团队，咨询集成、测试、验收过程中的任何问题。
